@model List<BudgetCal.Models.Expense>

@{
    ViewData["Title"] = "Expense Tracker";
}

<div class="expense-tracker">
    <div class="header">
        <button id="prevMonth" class="nav-btn">&larr; Previous</button>
        <h2 id="monthYear">@ViewBag.MonthName</h2>
        <div class="header-right">
            <button id="clearDataBtn" class="btn-clear">Clear All Data</button>
            <button id="nextMonth" class="nav-btn">Next &rarr;</button>
        </div>
    </div>

    <div class="calendar-container">
        <div class="calendar-header">
            <div class="day-name">Sunday</div>
            <div class="day-name">Monday</div>
            <div class="day-name">Tuesday</div>
            <div class="day-name">Wednesday</div>
            <div class="day-name">Thursday</div>
            <div class="day-name">Friday</div>
            <div class="day-name">Saturday</div>
        </div>
        <div id="calendarGrid" class="calendar-grid"></div>
    </div>

    <div class="add-expense-btn-container">
        <button id="addExpenseBtn" class="btn-primary">+ Add Expense</button>
    </div>
</div>

<!-- Expense Modal -->
<div id="expenseModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h3 id="modalTitle">Add Expense</h3>
        <form id="expenseForm">
            <input type="hidden" id="expenseId" />
            <input type="hidden" id="isRecurringInstance" />
            <div class="form-group">
                <label for="expenseDate">Date:</label>
                <input type="date" id="expenseDate" required />
            </div>
            <div class="form-group">
                <label for="expenseAmount">Amount:</label>
                <input type="number" id="expenseAmount" step="0.01" required />
            </div>
            <div class="form-group">
                <label for="expenseDescription">Description:</label>
                <input type="text" id="expenseDescription" required />
            </div>
            <div class="form-group">
                <label for="expenseCategory">Category:</label>
                <select id="expenseCategory" required>
                    <option value="">Select category</option>
                    <option value="Food">Food</option>
                    <option value="Transportation">Transportation</option>
                    <option value="Entertainment">Entertainment</option>
                    <option value="Utilities">Utilities</option>
                    <option value="Healthcare">Healthcare</option>
                    <option value="Shopping">Shopping</option>
                    <option value="Other">Other</option>
                </select>
            </div>
            <div class="form-group">
                <label>
                    <input type="checkbox" id="isRecurring" />
                    Recurring Expense
                </label>
            </div>
            <div id="recurringOptions" style="display: none;">
                <div class="form-group">
                    <label for="recurringInterval">Every:</label>
                    <input type="number" id="recurringInterval" min="1" value="1" />
                </div>
                <div class="form-group">
                    <label for="recurringPeriod">Period:</label>
                    <select id="recurringPeriod">
                        <option value="days">Days</option>
                        <option value="weeks">Weeks</option>
                        <option value="months">Months</option>
                    </select>
                </div>
            </div>
            <div class="form-actions">
                <button type="submit" class="btn-primary">Save</button>
                <button type="button" id="deleteExpenseBtn" class="btn-danger" style="display:none;">Delete</button>
            </div>
        </form>
    </div>
</div>

<!-- Recurring Edit Mode Modal -->
<div id="recurringEditModal" class="modal">
    <div class="modal-content">
        <h3>Edit Recurring Expense</h3>
        <p>This is a recurring expense. How would you like to edit it?</p>
        <div class="recurring-options">
            <button type="button" id="editThisOne" class="btn-primary">This One Only</button>
            <button type="button" id="editFromThisOne" class="btn-primary">This and Future Ones</button>
            <button type="button" id="editAllInSeries" class="btn-primary">All in Series</button>
            <button type="button" id="cancelRecurringEdit" class="btn-secondary">Cancel</button>
        </div>
    </div>
</div>

<!-- Recurring Delete Mode Modal -->
<div id="recurringDeleteModal" class="modal">
    <div class="modal-content">
        <h3>Delete Recurring Expense</h3>
        <p>This is a recurring expense. How would you like to delete it?</p>
        <div class="recurring-options">
            <button type="button" id="deleteThisOne" class="btn-danger">This One Only</button>
            <button type="button" id="deleteFromThisOne" class="btn-danger">This and Future Ones</button>
            <button type="button" id="deleteAllInSeries" class="btn-danger">All in Series</button>
            <button type="button" id="cancelRecurringDelete" class="btn-secondary">Cancel</button>
        </div>
    </div>
</div>

@section Scripts {
    <script src="~/js/expense-calendar.js"></script>
}
